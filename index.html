<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIRI-Penpal Diary</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-[#F7F4EB] flex justify-center">
    <div id="root" class="w-full max-w-[480px] min-h-screen relative"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // âœ… í† ë§ˆí† ë‹˜ì˜ Firebase ì„¤ì •ê°’ (ì •í™•íˆ ì…ë ¥ë¨)
        const firebaseConfig = {
            apiKey: "AIzaSyBhgHe856C8jJUsW_3gjJSOO3mlQXDee-c",
            authDomain: "diri-penpal-diary.firebaseapp.com",
            projectId: "diri-penpal-diary",
            storageBucket: "diri-penpal-diary.firebasestorage.app",
            messagingSenderId: "587612499384",
            appId: "1:587612499384:web:8c1f491372cb112050334d",
            measurementId: "G-G6WCPQ14BD"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        const App = () => {
            const [user, setUser] = useState(null);

            useEffect(() => {
                auth.onAuthStateChanged((u) => setUser(u));
            }, []);

            const googleLogin = () => {
                const provider = new firebase.auth.GoogleAuthProvider();
                // íŒì—… ì°½ì´ ë‹«íˆëŠ” ì´ìœ ë¥¼ ì¡ê¸° ìœ„í•´ alert ì¶”ê°€
                auth.signInWithPopup(provider)
                    .then(() => alert("ë¡œê·¸ì¸ ì„±ê³µ!"))
                    .catch((error) => {
                        // ì—¬ê¸°ì„œ ë²”ì¸ì´ ë‚˜ì˜µë‹ˆë‹¤!
                        alert("ğŸš¨ ë¡œê·¸ì¸ ì—ëŸ¬ ë°œìƒ!\nì½”ë“œ: " + error.code + "\në©”ì‹œì§€: " + error.message);
                        console.error(error);
                    });
            };

            if (!user) return (
                <div className="flex flex-col items-center justify-center h-screen">
                    <button onClick={googleLogin} className="bg-white border p-4 rounded-2xl shadow-md">
                        êµ¬ê¸€ ë¡œê·¸ì¸ ì‹œë„í•˜ê¸°
                    </button>
                </div>
            );

            return <div className="p-10 text-center">ë¡œê·¸ì¸ ì™„ë£Œ: {user.email}</div>;
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
